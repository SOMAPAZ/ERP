(()=>{let e=[];async function t(){try{const t=`${location.origin}/medids`,n=await fetch(t);e=await n.json(),function(){const t=document.getElementById("agenda-containerlec");t.innerHTML="";const n=empleadoId,a=e.filter((e=>1===parseInt(e.id_status)&&e.id_employment==n));if(0===a.length){const e=document.createElement("p");e.className="text-gray-800 dark:text-gray-400 text-center py-4",e.textContent="No hay registros disponibles.",t.appendChild(e)}else a.forEach((e=>{const n=document.createElement("div");n.className="bg-white shadow-lg px-6 py-4 border rounded-md dark:bg-gray-800 dark:border-gray-700 dark:text-white",n.id=`lectura-${e.id_user}`;const a=document.createElement("div");a.className="grid grid-cols-1 md:grid-cols-2 gap-4";const r=document.createElement("div");r.className="space-y-2",r.innerHTML=`\n        <p><strong class="dark:text-white">Usuario:</strong> \n        <span class="text-gray-500">${e.user} </span></p>\n        <p><strong class="dark:text-white">Dirección:</strong> \n        <span class="text-gray-500">${e.address}</span></p>\n        <p><strong class="dark:text-white">Zona:</strong> \n        <span class="text-gray-500">${e.zona}</span></p>\n      `;const s=document.createElement("div");s.className="space-y-2",s.innerHTML=`\n        <p><strong class="dark:text-white">ID Usuario:</strong> \n        <span class="text-gray-500">${e.id_user}</span></p>\n        <p><strong class="dark:text-white">Colonia:</strong> \n        <span class="text-gray-500">${e.colonia}</span></p>\n      `;const o=document.createElement("div");o.className="flex justify-center gap-5 grid-cols-1 md:grid-cols-2 col-span-2 mt-4";const c=document.createElement("a");c.href="/formularioagendalec",c.className="flex items-center justify-center uppercase bg-blue-600 text-white text-xs py-2 px-6 rounded-md shadow-md hover:bg-blue-500 gap-2",c.textContent="Registrar",c.addEventListener("click",(function(){localStorage.removeItem("lectura");const t={id:e.id,id_user:e.id_user,user:e.user,lastname:e.lastname,address:e.address,id_zone:e.zona,id_colony:e.colonia,id_observaciones:e.id_observaciones};localStorage.setItem("lectura",JSON.stringify(t))}));const i=document.createElement("button");i.className="flex items-center justify-center uppercase bg-red-600 text-white text-xs py-2 px-6 rounded-md shadow-md hover:bg-red-500 gap-2",i.textContent="Eliminar",i.addEventListener("click",(()=>{var t;t=e.id_user,Swal.fire({title:"¿Estás seguro?",text:"Esta acción no se puede deshacer",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then((e=>{e.isConfirmed&&fetch(`${location.origin}/medids/eliminar`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_user:t})}).then((e=>e.json())).then((e=>{"success"===e.status?Swal.fire({title:"Éxito",text:e.message,icon:"success",confirmButtonText:"OK"}).then((()=>{const e=document.querySelector(`#lectura-${t}`);e&&e.remove(),localStorage.removeItem("lectura")})):Swal.fire({title:"Error",text:e.message,icon:"error",confirmButtonText:"OK"})})).catch((e=>{console.error("Error al eliminar:",e),Swal.fire({title:"Error",text:"Hubo un problema al eliminar la notificación",icon:"error",confirmButtonText:"OK"})}))}))})),o.appendChild(c),o.appendChild(i),a.appendChild(r),a.appendChild(s),n.appendChild(a),n.appendChild(o),t.appendChild(n)}))}()}catch(e){console.log("Error al obtener lecturas:",e)}}document.addEventListener("DOMContentLoaded",(function(){t()}))})();