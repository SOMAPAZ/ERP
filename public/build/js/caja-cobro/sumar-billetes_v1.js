import GetDatos from"../classes/GetData_v1.js";import{roundAndFloat,formatNum}from"../helpers/index_v1.js";(()=>{const e=document.querySelectorAll(".input-billetes"),t=document.querySelector(".text-cambios"),o=document.querySelector("#recibe"),a=document.querySelector(".total-cajera"),n=document.querySelector("#total"),s=document.querySelector("form"),r=document.querySelector("#total_usuario");let d=[];window.addEventListener("unload",(()=>s.reset())),document.addEventListener("DOMContentLoaded",(()=>{l(),e.forEach((e=>e.addEventListener("input",i)))}));const l=async()=>{const e=`${location.origin}/api/empleados`;(await GetDatos.consultar(e)).forEach((e=>{if("0"===e.id)return;const t=document.createElement("option");t.value=e.id,t.textContent=`${e.nombre} ${e.apellido}`,o.appendChild(t)}))},i=e=>{const t=+e.target.value,o=+e.target.dataset.valor,a={denominacion:o,cantidad:t,total:t*o};d.find((e=>e.denominacion===o))&&(d=d.filter((e=>e.denominacion!==o))),d=[...d,a],console.log(d),u()},u=()=>{const e=d.reduce(((e,t)=>e+t.total),0);return a.textContent=`$ ${formatNum(roundAndFloat(e))} M.N.`,r.value=e,0===e?(s.querySelector('input[type="submit"]').disabled=!0,t.classList?.remove("text-orange-600"),t.classList?.remove("text-red-600"),!t.classList.contains("text-blue-600")&&t.classList.add("text-blue-600"),void(t.textContent="Ingrese la cantidad de billetes y monedas a√∫n")):+n.value-e<0?(t.classList?.remove("text-blue-600"),t.classList?.remove("text-red-600"),t.classList.add("text-orange-600"),t.textContent="La cantidad de billetes y monedas sumadas excede el monto del sistema",a.textContent="$ 00.00 M.N.",void(s.querySelector('input[type="submit"]').disabled=!0)):+n.value-e>2?(t.classList?.remove("text-blue-600"),t.classList?.remove("text-orange-600"),t.classList.add("text-red-600"),t.textContent=`Los datos difieren por ${formatNum(roundAndFloat(+n.value-e))}`,void s.querySelector('input[type="submit"]')?.removeAttribute("disabled")):+n.value-e<2?(t.classList?.remove("text-red-600"),t.classList?.remove("text-orange-600"),t.classList.add("text-blue-600"),t.textContent=`Los datos difieren por ${formatNum(roundAndFloat(+n.value-e))}`,void s.querySelector('input[type="submit"]')?.removeAttribute("disabled")):void 0}})();