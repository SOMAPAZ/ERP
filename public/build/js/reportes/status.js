import GetDatos from"../classes/GetData.js";import PostDatos from"../classes/PostData.js";import Alerta from"../classes/Alerta.js";import{getSearch}from"../helpers/index.js";(()=>{const t=document.querySelectorAll("#ol-status button"),e=document.querySelector("#status-1 button"),s=document.querySelector("#status-2 button"),a=document.querySelector("#status-3 button"),r=document.querySelector("#status-4 button");let o=1;document.addEventListener("DOMContentLoaded",(()=>{l(),e.addEventListener("click",(()=>n(e.dataset.status))),s.addEventListener("click",(()=>n(s.dataset.status))),a.addEventListener("click",(()=>n(a.dataset.status))),r.addEventListener("click",(()=>n(r.dataset.status)))}));const l=async()=>{const t=`${location.origin}/reporte/estado?folio=${getSearch().folio}`,e=await GetDatos.consultar(t);o=Number(e),d()},n=async t=>{const e=`${location.origin}/reporte/estado/actualizar`,s=Number(t),a=[s,getSearch().folio],r=await PostDatos.enviarArray(e,a);"Exito"===r.tipo&&(Alerta.Toast.fire({icon:"success",title:"Cambio exitoso",text:r.msg}),o=s,d())},d=()=>{t.forEach((t=>{const e=Number(t.dataset.status),s=t.parentElement;e<=o&&(s.classList.remove("text-gray-500","dark:text-gray-400"),s.classList.add("text-blue-600","dark:text-blue-500"),t.classList.remove("border","border-gray-500","dark:border-gray-400"),t.classList.add("bg-blue-100","dark:bg-blue-800"),t.innerHTML='<svg class="w-3.5 h-3.5 text-blue-600 lg:w-4 lg:h-4 dark:text-blue-300" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 12"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 5.917 5.724 10.5 15 1.5"/></svg>'),e>o&&(s.classList.add("text-gray-500","dark:text-gray-400"),s.classList.remove("text-blue-600","dark:text-blue-500"),t.classList.add("border","border-gray-500","dark:border-gray-400"),t.classList.remove("bg-blue-100","dark:bg-blue-800"),t.innerHTML="",t.textContent=e)}))}})();