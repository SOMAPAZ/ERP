(()=>{const e=document.querySelector("#table-deudores tbody"),t=document.querySelector("#btn-anterior"),n=document.querySelector("#btn-siguiente"),a=document.querySelector("#info-pagina"),o=document.querySelector("#colonia"),s=document.querySelector("#zona"),c=document.querySelector("#meses"),i=document.querySelector("#cantidad"),d=document.querySelector("#btn-reset"),r=document.querySelector("#filtrado-text"),l=document.querySelector("#resultados-text");let m=30,u=1,p=0,x=[],f="",h="",g="",y="",C=[],v=[];async function w(o=""){try{""===o&&(o=`${location.origin}/notificaciones/deudores?limite=${m}&offset=${$()}`);const s=await fetch(o),c=await s.json();x=c.usuarios,p=c.total,l.textContent=`${p} resultados`,function(){(function(e){for(;e.firstChild;)e.removeChild(e.firstChild)})(e),1===u?(t.classList.remove("flex"),t.classList.add("hidden")):(t.classList.add("flex"),t.classList.remove("hidden"));const n=(u-1)*m;a.innerHTML=`Mostrando <span class="font-semibold text-gray-900 dark:text-white">${$()+1}</span> a <span class="font-semibold text-gray-900 dark:text-white">${n+m>p?p:n+m}</span> de <span class="font-semibold text-gray-900 dark:text-white">${p}</span> resultados`,x.map((t=>{const n=document.createElement("TR");n.className="whitespace-nowrap bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 uppercase";const a=document.createElement("TD");a.className="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white",a.textContent=t.id;const o=document.createElement("TD");o.className="px-6 py-4",o.textContent=`${t.user} ${t.lastname}`.slice(0,40)+"...";const s=document.createElement("TD");s.className="px-6 py-4",s.textContent=t.address.slice(0,40)+"...";const c=document.createElement("TD");c.className="px-6 py-4",c.textContent=t.id_colony;const i=document.createElement("TD");i.className="px-6 py-4",i.textContent=t.id_zone;const d=document.createElement("TD");d.className="px-6 py-4",d.textContent=t.adeudos.meses_rezagados;const r=document.createElement("TD");r.className="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white";const l=Number(t.adeudos.total);r.textContent=`$ ${l.toLocaleString("en-US")}`;const m=document.createElement("TD");m.className="py-2 px-6";const u=document.createElement("BUTTON");u.className="flex items-center justify-center w-full uppercase text-blue-600 hover:text-blue-900 dark:text-blue-300 dark:hover:text-blue-500 text-xs py-1 px-3 rounded-md gap-2",u.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6"><path stroke-linecap="round" stroke-linejoin="round" d="M12 10.5v6m3-3H9m4.06-7.19-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z" /></svg><p class="font-bold text-xs">Agregar</p>',m.appendChild(u),n.appendChild(a),n.appendChild(o),n.appendChild(s),n.appendChild(c),n.appendChild(i),n.appendChild(d),n.appendChild(r),n.appendChild(m),e.appendChild(n)}))}(),m>x.length||m+$()>=p?(n.classList.remove("flex"),n.classList.add("hidden")):(n.classList.remove("hidden"),n.classList.add("flex"))}catch(e){console.log(e)}}function $(){return u-1==0?0:(u-1)*m}function E(){u++,""===g?w():""===y?L():k()}function b(){u--,""===g?w():""===y?L():k()}function L(){""!==f&&""!==h&&(g=`${location.origin}/notificaciones/deudores?limite=${m}&offset=${$()}&id_filter=${h}&whoffset=${f}`,w(g))}function k(){""!==y&&(g=`${location.origin}/notificaciones/deudores?limite=${m}&offset=${$()}&between=${y}`,w(g))}document.addEventListener("DOMContentLoaded",(function(){w(),async function(){try{const e=`${location.origin}/api/colonias`,t=await fetch(e);C=await t.json(),C.map((e=>{if("1"!==e.id){const t=document.createElement("OPTION");t.value=e.id,t.text=e.name,o.appendChild(t)}}))}catch(e){console.log(e)}}(),async function(){try{const e=`${location.origin}/api/zonas`,t=await fetch(e);v=await t.json(),v.map((e=>{if("1"!==e.id){const t=document.createElement("OPTION");t.value=e.id,t.text=e.name,s.appendChild(t)}}))}catch(e){console.log(e)}}(),t.addEventListener("click",b),n.addEventListener("click",E),o.addEventListener("change",(e=>{m=30,u=1,p=0,f=e.target.value.trim(),e.target.parentElement.reset(),h="id_colony",L(),r.textContent=`${C.find((e=>e.id===f)).name}`})),s.addEventListener("change",(e=>{m=30,u=1,p=0,f=e.target.value.trim(),e.target.parentElement.reset(),h="id_zone",L(),r.textContent=`${v.find((e=>e.id===f)).name}`})),c.addEventListener("change",(e=>{m=30,u=1,p=0,y=e.target.value.trim(),e.target.parentElement.reset(),k(),"13"===y.split("_")[0]?r.textContent="MÃ¡s de 13 meses":r.textContent=`${y.split("_")[0]} a ${y.split("_")[1]} meses`})),i.addEventListener("change",(e=>{console.log(e.target.value)})),d.addEventListener("click",(e=>{e.target.parentElement.reset(),g="",w(),r.textContent="Ninguno"}))}))})();